var app=angular.module("AlgoTrader",["ui.bootstrap","ngRoute","ngAnimate","toaster","highcharts-ng","ngResource","ngSanitize","ngGrid"]);app.config(["$routeProvider",function(n){n.when("/Home",{templateUrl:"Main/Home"}).when("/About",{templateUrl:"Main/About"}).when("/Stocks",{controller:"StockController",templateUrl:"Portfolio/Stocks"}).when("/Options",{controller:"OptionController",templateUrl:"Portfolio/Options"}).otherwise({redirectTo:"/Home"})}]);app.controller("LoginController",["$scope","authenticationService","toaster",function(n,t,i){n.antiForgeryToken=undefined;n.login=function(){if(n.loginForm.$valid){var r=t.Login(n.loginModel,n.antiForgeryToken);r.then(function(n){return n=="true"?(window.location.href="/",!0):(i.pop("error",n.toString()),!1)})}else i.pop("error","Invalid Form")};n.logOut=function(){var i=t.LogOut(n.antiForgeryToken);i.then(function(){window.location.href="/"})}}]);app.controller("NavigationController",["$scope","$location",function(n,t){n.getClass=function(n){return t.path().substr(0,n.length)==n?!0:!1}}]);app.controller("OptionController",["$scope","autocompleteService","toaster","optionAnalysisService","utilitiesService",function(n,t,i,r,u){function f(){n.options=r.getOptionData()}function e(t){var u=r.getOptions(t);u.then(function(r){if(r.length==0){i.pop("information","No options found.","Please try another symbol/company as not all companies have option listings");n.selected=undefined;n.loading=!1;return}n.options.push({symbol:t,data:r});n.selected=undefined;n.loading=!1})}n.btnRadioData={selectedOpton:undefined};f();n.symbols=[];n.OnInputChange=function(){n.symbols=t.getSymbols(n.selected)};n.SelectSymbol=function(){var t=n.selected.Symbol;n.loading=!0;u.isItemInArrayByProperty(n.options,"symbol",t)?(i.pop("warning","The options table for this symbol has already been retrieved."),n.loading=!1):e(t)};n.viewOptionData=function(t){var i=u.findObjByKey(n.options,"symbol",t);n.volatility=i.data[0].Volatility;n.currentOptionSet=i.data;n.filteredOptions=i.data;n.inTheMoney=!1;$(window).resize()};n.filterByInTheMoney=function(){if(n.inTheMoney){n.filteredOptions=[];for(var t=0;t<n.currentOptionSet.length;t++)n.currentOptionSet[t].InTheMoney&&n.filteredOptions.push(n.currentOptionSet[t])}n.inTheMoney||(n.filteredOptions=n.currentOptionSet)};n.filterOptions={filterText:""};n.isVolatilityPopulated=function(){return n.volatility>0?!0:!1};n.gridDataAvailable=function(){return n.options.length>0?!0:!1};n.gridOptions={data:"filteredOptions",filterOptions:n.filterOptions,enablePinning:!0,enableColumnResize:!0,columnDefs:[{field:"StrikePrice",displayName:"Strike",width:"10%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"Symbol",width:"18%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"LastPrice",displayName:"Last",width:"5%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"Change",width:"7%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"Bid",width:"5%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"Ask",width:"5%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"Vol",width:"5%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"OpenInt",width:"8%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"DaysToExpiry",width:"5%",displayName:"DTE",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"},{field:"BlackScholes",displayName:"Black Scholes",width:"11%",cellTemplate:"<div ng-class=\"{optionGridRowInTheMoney: row.getProperty('InTheMoney'), optionGridRowAtTheMoney: row.getProperty('AtTheMoney')}\"><div class=\"ngCellText\">{{row.getProperty(col.field)}}<\/div><\/div>"}]};n.viewSelected=function(){return n.btnRadioData.selectedOption!=undefined?!0:!1};n.RemoveFromList=function(t,i){u.removeObjByKey(n.options,"symbol",i);n.inTheMoney=!1}}]);app.controller("RegistrationController",["$scope","authenticationService","toaster",function(n,t,i){n.antiForgeryToken=undefined;n.register=function(){if(n.registerForm.$valid){var r=t.Register(n.registerModel,n.antiForgeryToken);r.then(function(n){if(n!=undefined&&n.success!=undefined)return i.pop("success","Registration completed successfully."),window.location.href="/",!0;if(n!=undefined)if(n.length>1)for(var t=0;t<n.length;t++)i.pop("error",n[t].toString());else i.pop("error",n.toString());return!1})}else i.pop("error","Invalid Form")}}]);app.controller("StockController",["$scope","utilitiesService","autocompleteService","stockAnalysisService","highStockService","toaster",function(n,t,i,r,u,f){function o(){n.stockList=r.getStockList();n.companySymbol=r.getCompanySymbolKey();u.isChartEmpty()||(n.isChartEmpty=!1,u.createChart())}function s(i,u){if(t.isItemInArrayByProperty(n.stockList,"Symbol",i)===!1){r.persistCompanySymbolKey({name:u,symbol:i});var e=r.getStockData(i);e===0&&f.pop("information","No data obtained","No stock data was found for the selected company.")}else f.pop("warning","","Symbol already in watch-list"),n.selected=undefined}var e;n.stockList=[];n.selected=undefined;n.isChartEmpty=!0;n.symbols=[];n.companySymbol=[];o();n.OnInputChange=function(){n.symbols=i.getSymbols(n.selected)};n.SelectSymbol=function(){var t=n.selected.Symbol,i=n.selected.Name;t!==undefined&&t!==null&&i!==null&&(e=t,s(t,i),n.selected=undefined)};n.companyName=function(t){for(var i=0;i<=n.companySymbol.length;i++)if(n.companySymbol[i].symbol===t)return n.companySymbol[i].name};n.RemoveFromList=function(t,i){r.removeStock(t);n.updateChart(i,!1)};n.isStockListEmpty=function(){return n.stockList.length>0?!0:!1};n.updateChart=function(t,i){if(t!==null){if(i&&u.duplicatedSeries(t)===!1){var f=r.getHistoricalDataBySymbol(t);u.addHistoricalDataSeries(f)}else u.removeSeries(t);n.isChartEmpty=u.isChartEmpty()?!0:!1;u.createChart()}}}]);app.directive("circle",function(){return{restrict:"E",templateUrl:"/Content/Directives/circle.html"}});app.directive("ngEnter",function(){return function(n,t,i){t.bind("keydown keypress",function(t){t.which===13&&(n.$apply(function(){n.$eval(i.ngEnter)}),t.preventDefault())})}}),function(n,t){"use strict";var f=6,b=4,o="asc",k="desc",s="_ng_field_",h="_ng_depth_",e="_ng_hidden_",c="_ng_column_",y=/CUSTOM_FILTERS/g,d=/COL_FIELD/g,tt=/DISPLAY_CELL_TEMPLATE/g,it=/EDITABLE_CELL_TEMPLATE/g,l=/<.+>/,nt,u;n.ngGrid={};n.ngGrid.i18n={};var ct=angular.module("ngGrid.services",[]),i=angular.module("ngGrid.directives",[]),g=angular.module("ngGrid.filters",[]);angular.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]);nt=function(n,t,i,r){var s,v,h,c;if(n.selectionProvider.selectedItems===undefined)return!0;var u=i.which||i.keyCode,e,y=!1,p=!1,l=n.selectionProvider.lastClickedRow===undefined?1:n.selectionProvider.lastClickedRow.rowIndex,o=n.columns.filter(function(n){return n.visible}),a=n.columns.filter(function(n){return n.pinned});if(n.col&&(e=o.indexOf(n.col)),u!==37&&u!==38&&u!==39&&u!==40&&u!==9&&u!==13)return!0;if(n.enableCellSelection){u===9&&i.preventDefault();var w=n.showSelectionCheckbox?n.col.index===1:n.col.index===0,k=n.$index===1||n.$index===0,d=n.$index===n.renderedColumns.length-1||n.$index===n.renderedColumns.length-2,b=o.indexOf(n.col)===o.length-1,g=a.indexOf(n.col)===a.length-1;u===37||u===9&&i.shiftKey?(s=0,w||(e-=1),k?w&&u===9&&i.shiftKey?(s=r.$canvas.width(),e=o.length-1,p=!0):s=r.$viewport.scrollLeft()-n.col.width:a.length>0&&(s=r.$viewport.scrollLeft()-o[e].width),r.$viewport.scrollLeft(s)):u!==39&&(u!==9||i.shiftKey)||(d?b&&u===9&&!i.shiftKey?(r.$viewport.scrollLeft(0),e=n.showSelectionCheckbox?1:0,y=!0):r.$viewport.scrollLeft(r.$viewport.scrollLeft()+n.col.width):g&&r.$viewport.scrollLeft(0),b||(e+=1))}return v=n.configGroups.length>0?r.rowFactory.parsedData.filter(function(n){return!n.isAggRow}):r.filteredRows,h=0,l!==0&&(u===38||u===13&&i.shiftKey||u===9&&i.shiftKey&&p)?h=-1:l!==v.length-1&&(u===40||u===13&&!i.shiftKey||u===9&&y)&&(h=1),h&&(c=v[l+h],c.beforeSelectionChange(c,i)&&(c.continueSelection(i),n.$emit("ngGridEventDigestGridParent"),n.selectionProvider.lastClickedRow.renderedRowIndex>=n.renderedRows.length-f-2?r.$viewport.scrollTop(r.$viewport.scrollTop()+n.rowHeight):n.selectionProvider.lastClickedRow.renderedRowIndex<=f+2&&r.$viewport.scrollTop(r.$viewport.scrollTop()-n.rowHeight))),n.enableCellSelection&&setTimeout(function(){n.domAccessProvider.focusCellElement(n,n.renderedColumns.indexOf(o[e]))},3),!1};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1});Array.prototype.filter||(Array.prototype.filter=function(n){var i=Object(this),e=i.length>>>0,r,f,t,u;if(typeof n!="function")throw new TypeError;for(r=[],f=arguments[1],t=0;t<e;t++)t in i&&(u=i[t],n.call(f,u,t,i)&&r.push(u));return r});g.filter("checkmark",function(){return function(n){return n?"✔":"✘"}});g.filter("ngColumns",function(){return function(n){return n.filter(function(n){return!n.isAggCol})}});angular.module("ngGrid.services").factory("$domUtilityService",["$utilityService",function(n){var i={},r={},u=function(){var n=t("<div><\/div>");n.appendTo("body");n.height(100).width(100).css("position","absolute").css("overflow","scroll");n.append('<div style="height: 400px; width: 400px;"><\/div>');i.ScrollH=n.height()-n[0].clientHeight;i.ScrollW=n.width()-n[0].clientWidth;n.empty();n.attr("style","");n.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M<\/strong><\/span>');i.LetterW=n.children().first().width();n.remove()};return i.eventStorage={},i.AssignGridContainers=function(n,r,u){u.$root=t(r);u.$topPanel=u.$root.find(".ngTopPanel");u.$groupPanel=u.$root.find(".ngGroupPanel");u.$headerContainer=u.$topPanel.find(".ngHeaderContainer");n.$headerContainer=u.$headerContainer;u.$headerScroller=u.$topPanel.find(".ngHeaderScroller");u.$headers=u.$headerScroller.children();u.$viewport=u.$root.find(".ngViewport");u.$canvas=u.$viewport.find(".ngCanvas");u.$footerPanel=u.$root.find(".ngFooterPanel");n.$watch(function(){return u.$viewport.scrollLeft()},function(n){return u.$headerContainer.scrollLeft(n)});i.UpdateGridLayout(n,u)},i.getRealWidth=function(n){var i=0,r=n.parents().andSelf().not(":visible");return t.swap(r[0],{visibility:"hidden",display:"block"},function(){i=n.outerWidth()}),i},i.UpdateGridLayout=function(n,t){var r=t.$viewport.scrollTop();t.elementDims.rootMaxW=t.$root.width();t.$root.is(":hidden")&&(t.elementDims.rootMaxW=i.getRealWidth(t.$root));t.elementDims.rootMaxH=t.$root.height();t.refreshDomSizes();n.adjustScrollTop(r,!0)},i.numberOfGrids=0,i.BuildStyles=function(r,u,f){var y=u.config.rowHeight,e=u.$styleSheet,o=u.gridId,l,a=r.columns,v=0,h,s,c;for(e||(e=t("#"+o),e[0]||(e=t("<style id='"+o+"' type='text/css' rel='stylesheet' />").appendTo(u.$root))),e.empty(),h=r.totalRowWidth(),l="."+o+" .ngCanvas { width: "+h+"px; }."+o+" .ngRow { width: "+h+"px; }."+o+" .ngCanvas { width: "+h+"px; }."+o+" .ngHeaderScroller { width: "+(h+i.ScrollH)+"px}",s=0;s<a.length;s++)c=a[s],c.visible!==!1&&(l+="."+o+" .col"+s+" { width: "+c.width+"px; left: "+v+"px; height: "+y+"px }."+o+" .colt"+s+" { width: "+c.width+"px; }",v+=c.width);n.isIe?e[0].styleSheet.cssText=l:e[0].appendChild(document.createTextNode(l));u.$styleSheet=e;r.adjustScrollLeft(u.$viewport.scrollLeft());f&&i.digest(r)},i.setColLeft=function(t,i,u){var f,o,e;u.$styleSheet&&(f=r[t.index],f||(f=r[t.index]=new RegExp(".col"+t.index+" { width: [0-9]+px; left: [0-9]+px")),o=u.$styleSheet.html(),e=o.replace(f,".col"+t.index+" { width: "+t.width+"px; left: "+i+"px"),n.isIe?setTimeout(function(){u.$styleSheet.html(e)}):u.$styleSheet.html(e))},i.setColLeft.immediate=1,i.RebuildGrid=function(n,t){i.UpdateGridLayout(n,t);(t.config.maintainColumnRatios==null||t.config.maintainColumnRatios)&&t.configureColumnWidths();n.adjustScrollLeft(t.$viewport.scrollLeft());i.BuildStyles(n,t,!0)},i.digest=function(n){n.$root.$$phase||n.$digest()},i.ScrollH=17,i.ScrollW=17,i.LetterW=10,u(),i}]);angular.module("ngGrid.services").factory("$sortService",["$parse",function(n){var t={};return t.colSortFnCache={},t.guessSortFn=function(n){var i=typeof n;switch(i){case"number":return t.sortNumber;case"boolean":return t.sortBool;case"string":return n.match(/^[-+]?[£$¤]?[\d,.]+%?$/)?t.sortNumberStr:t.sortAlpha;default:return Object.prototype.toString.call(n)==="[object Date]"?t.sortDate:t.basicSort}},t.basicSort=function(n,t){return n===t?0:n<t?-1:1},t.sortNumber=function(n,t){return n-t},t.sortNumberStr=function(n,t){var i,r,u=!1,f=!1;return(i=parseFloat(n.replace(/[^0-9.-]/g,"")),isNaN(i)&&(u=!0),r=parseFloat(t.replace(/[^0-9.-]/g,"")),isNaN(r)&&(f=!0),u&&f)?0:u?1:f?-1:i-r},t.sortAlpha=function(n,t){var i=n.toLowerCase(),r=t.toLowerCase();return i===r?0:i<r?-1:1},t.sortDate=function(n,t){var i=n.getTime(),r=t.getTime();return i===r?0:i<r?-1:1},t.sortBool=function(n,t){return n&&t?0:n||t?n?1:-1:0},t.sortData=function(i,r){if(r&&i){var s=i.fields.length,u=i.fields,f,e,h=r.slice(0);r.sort(function(r,c){for(var l=0,a=0,p,v,y;l===0&&a<s;)f=i.columns[a],e=i.directions[a],p=t.getSortFn(f,h),v=n(u[a])(r),y=n(u[a])(c),(v||v===0)&&(y||y===0)?l=p(v,y):y||v?v?y||(l=-1):l=1:l=0,a++;return e===o?l:0-l})}},t.Sort=function(n,i){t.isSorting||(t.isSorting=!0,t.sortData(n,i),t.isSorting=!1)},t.getSortFn=function(i,r){var u,f;if(t.colSortFnCache[i.field])u=t.colSortFnCache[i.field];else if(i.sortingAlgorithm!==undefined)u=i.sortingAlgorithm,t.colSortFnCache[i.field]=i.sortingAlgorithm;else{if(f=r[0],!f)return u;u=t.guessSortFn(n(i.field)(f));u?t.colSortFnCache[i.field]=u:u=t.sortAlpha}return u},t}]);angular.module("ngGrid.services").factory("$utilityService",["$parse",function(i){var u=/function (.{1,})\(/,r={visualLength:function(n){var i=document.getElementById("testDataLength");return i||(i=document.createElement("SPAN"),i.id="testDataLength",i.style.visibility="hidden",document.body.appendChild(i)),t(i).css("font",t(n).css("font")),t(i).css("font-size",t(n).css("font-size")),t(i).css("font-family",t(n).css("font-family")),i.innerHTML=t(n).text(),i.offsetWidth},forIn:function(n,t){for(var i in n)n.hasOwnProperty(i)&&t(n[i],i)},evalProperty:function(n,t){return i(t)(n)},endsWith:function(n,t){return!n||!t||typeof n!="string"?!1:n.indexOf(t,n.length-t.length)!==-1},isNullOrUndefined:function(n){return n===undefined||n===null?!0:!1},getElementsByClassName:function(n){for(var u,r=[],f=new RegExp("\\b"+n+"\\b"),i=document.getElementsByTagName("*"),t=0;t<i.length;t++)u=i[t].className,f.test(u)&&r.push(i[t]);return r},newId:function(){var n=(new Date).getTime();return function(){return n+=1}}(),seti18n:function(t,i){var r=n.ngGrid.i18n[i];for(var u in r)t.i18n[u]=r[u]},getInstanceType:function(n){var t=u.exec(n.constructor.toString());return t&&t.length>1?t[1].replace(/^\s+|\s+$/g,""):""},ieVersion:function(){var n=3,t=document.createElement("div"),i=t.getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->";while(i[0]);return n>4?n:undefined}()};return t.extend(r,{isIe:function(){return r.ieVersion!==undefined}()}),r}]);u=function(n,t,i,r){this.rowIndex=0;this.offsetTop=this.rowIndex*i;this.entity=n;this.label=n.gLabel;this.field=n.gField;this.depth=n.gDepth;this.parent=n.parent;this.children=n.children;this.aggChildren=n.aggChildren;this.aggIndex=n.aggIndex;this.collapsed=r;this.groupInitState=r;this.rowFactory=t;this.rowHeight=i;this.isAggRow=!0;this.offsetLeft=n.gDepth*25;this.aggLabelFilter=n.aggLabelFilter};u.prototype.toggleExpand=function(){this.collapsed=this.collapsed?!1:!0;this.orig&&(this.orig.collapsed=this.collapsed);this.notifyChildren()};u.prototype.setExpand=function(n){this.collapsed=n;this.notifyChildren()};u.prototype.notifyChildren=function(){for(var t,i,r=Math.max(this.rowFactory.aggCache.length,this.children.length),n=0;n<r;n++)this.aggChildren[n]&&(this.aggChildren[n].entity[e]=this.collapsed,this.collapsed&&this.aggChildren[n].setExpand(this.collapsed)),this.children[n]&&(this.children[n][e]=this.collapsed),n>this.aggIndex&&this.rowFactory.aggCache[n]&&(t=this.rowFactory.aggCache[n],i=30*this.children.length,t.offsetTop=this.collapsed?t.offsetTop-i:t.offsetTop+i);this.rowFactory.renderedChange()};u.prototype.aggClass=function(){return this.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded"};u.prototype.totalChildren=function(){if(this.aggChildren.length>0){var n=0,t=function(i){i.aggChildren.length>0?angular.forEach(i.aggChildren,function(n){t(n)}):n+=i.children.length};return t(this),n}return this.children.length};u.prototype.copy=function(){var n=new u(this.entity,this.rowFactory,this.rowHeight,this.groupInitState);return n.orig=this,n};var a=function(n,i,r,u,f,e){var s=this,h=n.colDef,p=500,c=0,v=null;s.colDef=n.colDef;s.width=h.width;s.groupIndex=0;s.isGroupedBy=!1;s.minWidth=h.minWidth?h.minWidth:50;s.maxWidth=h.maxWidth?h.maxWidth:9e3;s.enableCellEdit=h.enableCellEdit!==undefined?h.enableCellEdit:n.enableCellEdit||n.enableCellEditOnFocus;s.headerRowHeight=n.headerRowHeight;s.displayName=h.displayName===undefined?h.field:h.displayName;s.index=n.index;s.isAggCol=n.isAggCol;s.cellClass=h.cellClass;s.sortPriority=undefined;s.cellFilter=h.cellFilter?h.cellFilter:"";s.field=h.field;s.aggLabelFilter=h.cellFilter||h.aggLabelFilter;s.visible=e.isNullOrUndefined(h.visible)||h.visible;s.sortable=!1;s.resizable=!1;s.pinnable=!1;s.pinned=n.enablePinning&&h.pinned;s.originalIndex=n.originalIndex==null?s.index:n.originalIndex;s.groupable=e.isNullOrUndefined(h.groupable)||h.groupable;n.enableSort&&(s.sortable=e.isNullOrUndefined(h.sortable)||h.sortable);n.enableResize&&(s.resizable=e.isNullOrUndefined(h.resizable)||h.resizable);n.enablePinning&&(s.pinnable=e.isNullOrUndefined(h.pinnable)||h.pinnable);s.sortDirection=undefined;s.sortingAlgorithm=h.sortFn;s.headerClass=h.headerClass;s.cursor=s.sortable?"pointer":"default";s.headerCellTemplate=h.headerCellTemplate||f.get("headerCellTemplate.html");s.cellTemplate=h.cellTemplate||f.get("cellTemplate.html").replace(y,s.cellFilter?"|"+s.cellFilter:"");s.enableCellEdit&&(s.cellEditTemplate=f.get("cellEditTemplate.html"),s.editableCellTemplate=h.editableCellTemplate||f.get("editableCellTemplate.html"));h.cellTemplate&&!l.test(h.cellTemplate)&&(s.cellTemplate=t.ajax({type:"GET",url:h.cellTemplate,async:!1}).responseText);s.enableCellEdit&&h.editableCellTemplate&&!l.test(h.editableCellTemplate)&&(s.editableCellTemplate=t.ajax({type:"GET",url:h.editableCellTemplate,async:!1}).responseText);h.headerCellTemplate&&!l.test(h.headerCellTemplate)&&(s.headerCellTemplate=t.ajax({type:"GET",url:h.headerCellTemplate,async:!1}).responseText);s.colIndex=function(){var n=s.pinned?"pinned ":"";return n+="col"+s.index+" colt"+s.index,s.cellClass&&(n+=" "+s.cellClass),n};s.groupedByClass=function(){return s.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon"};s.toggleVisible=function(){s.visible=!s.visible};s.showSortButtonUp=function(){return s.sortable?s.sortDirection===k:s.sortable};s.showSortButtonDown=function(){return s.sortable?s.sortDirection===o:s.sortable};s.noSortVisible=function(){return!s.sortDirection};s.sort=function(t){if(!s.sortable)return!0;var i=s.sortDirection===o?k:o;return s.sortDirection=i,n.sortCallback(s,t),!1};s.gripClick=function(){c++;c===1?v=setTimeout(function(){c=0},p):(clearTimeout(v),n.resizeOnDataCallback(s),c=0)};s.gripOnMouseDown=function(n){return(i.isColumnResizing=!0,n.ctrlKey&&!s.pinned)?(s.toggleVisible(),u.BuildStyles(i,r),!0):(n.target.parentElement.style.cursor="col-resize",s.startMousePosition=n.clientX,s.origWidth=s.width,t(document).mousemove(s.onMouseMove),t(document).mouseup(s.gripOnMouseUp),!1)};s.onMouseMove=function(n){var f=n.clientX-s.startMousePosition,t=f+s.origWidth;return s.width=t<s.minWidth?s.minWidth:t>s.maxWidth?s.maxWidth:t,i.hasUserChangedGridColumnWidths=!0,u.BuildStyles(i,r),!1};s.gripOnMouseUp=function(n){return t(document).off("mousemove",s.onMouseMove),t(document).off("mouseup",s.gripOnMouseUp),n.target.parentElement.style.cursor="default",u.digest(i),i.isColumnResizing=!1,!1};s.copy=function(){var t=new a(n,i,r,u,f);return t.isClone=!0,t.orig=s,t};s.setVars=function(n){s.orig=n;s.width=n.width;s.groupIndex=n.groupIndex;s.isGroupedBy=n.isGroupedBy;s.displayName=n.displayName;s.index=n.index;s.isAggCol=n.isAggCol;s.cellClass=n.cellClass;s.cellFilter=n.cellFilter;s.field=n.field;s.aggLabelFilter=n.aggLabelFilter;s.visible=n.visible;s.sortable=n.sortable;s.resizable=n.resizable;s.pinnable=n.pinnable;s.pinned=n.pinned;s.originalIndex=n.originalIndex;s.sortDirection=n.sortDirection;s.sortingAlgorithm=n.sortingAlgorithm;s.headerClass=n.headerClass;s.headerCellTemplate=n.headerCellTemplate;s.cellTemplate=n.cellTemplate;s.cellEditTemplate=n.cellEditTemplate}},p=function(n){this.outerHeight=null;this.outerWidth=null;t.extend(this,n)},v=function(n){this.previousColumn=null;this.grid=n};v.prototype.changeUserSelect=function(n,t){n.css({"-webkit-touch-callout":t,"-webkit-user-select":t,"-khtml-user-select":t,"-moz-user-select":t==="none"?"-moz-none":t,"-ms-user-select":t,"user-select":t})};v.prototype.focusCellElement=function(n,t){var u,f,r,i;n.selectionProvider.lastClickedRow&&(u=t!==undefined?t:this.previousColumn,f=n.selectionProvider.lastClickedRow.clone?n.selectionProvider.lastClickedRow.clone.elm:n.selectionProvider.lastClickedRow.elm,u!==undefined&&f&&(r=angular.element(f[0].children).filter(function(){return this.nodeType!==8}),i=Math.max(Math.min(n.renderedColumns.length-1,u),0),this.grid.config.showSelectionCheckbox&&angular.element(r[i]).scope()&&angular.element(r[i]).scope().col.index===0&&(i=1),r[i]&&r[i].children[1].children[0].focus(),this.previousColumn=u))};v.prototype.selectionHandlers=function(n,t){var i=!1,r=this;t.bind("keydown",function(u){if(u.keyCode===16)return r.changeUserSelect(t,"none",u),!0;if(!i){i=!0;var f=nt(n,t,u,r.grid);return i=!1,f}return!0});t.bind("keyup",function(n){return n.keyCode===16&&r.changeUserSelect(t,"text",n),!0})};var rt=function(i,r,u,f){var e=this;e.colToMove=undefined;e.groupToMove=undefined;e.assignEvents=function(){if(i.config.jqueryUIDraggable&&!i.config.enablePinning)i.$groupPanel.droppable({addClasses:!1,drop:function(n){e.onGroupDrop(n)}});else{i.$groupPanel.on("mousedown",e.onGroupMouseDown).on("dragover",e.dragOver).on("drop",e.onGroupDrop);i.$headerScroller.on("mousedown",e.onHeaderMouseDown).on("dragover",e.dragOver);if(i.config.enableColumnReordering&&!i.config.enablePinning)i.$headerScroller.on("drop",e.onHeaderDrop)}r.$watch("renderedColumns",function(){f(e.setDraggables)})};e.dragStart=function(n){n.dataTransfer.setData("text","")};e.dragOver=function(n){n.preventDefault()};e.setDraggables=function(){if(i.config.jqueryUIDraggable)i.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:!1,start:function(n){e.onHeaderMouseDown(n)}}).droppable({drop:function(n){e.onHeaderDrop(n)}});else{var n=i.$root.find(".ngHeaderSortColumn");angular.forEach(n,function(n){n.className&&n.className.indexOf("ngHeaderSortColumn")!==-1&&(n.setAttribute("draggable","true"),n.addEventListener&&n.addEventListener("dragstart",e.dragStart))});navigator.userAgent.indexOf("MSIE")!==-1&&i.$root.find(".ngHeaderSortColumn").bind("selectstart",function(){return this.dragDrop(),!1})}};e.onGroupMouseDown=function(n){var r=t(n.target),u;r[0].className!=="ngRemoveGroup"?(u=angular.element(r).scope(),u&&(i.config.jqueryUIDraggable||(r.attr("draggable","true"),this.addEventListener&&this.addEventListener("dragstart",e.dragStart),navigator.userAgent.indexOf("MSIE")!==-1&&r.bind("selectstart",function(){return this.dragDrop(),!1})),e.groupToMove={header:r,groupName:u.group,index:u.$index})):e.groupToMove=undefined};e.onGroupDrop=function(n){n.stopPropagation();var u,f;e.groupToMove?(u=t(n.target).closest(".ngGroupElement"),u.context.className==="ngGroupPanel"?(r.configGroups.splice(e.groupToMove.index,1),r.configGroups.push(e.groupToMove.groupName)):(f=angular.element(u).scope(),f&&e.groupToMove.index!==f.$index&&(r.configGroups.splice(e.groupToMove.index,1),r.configGroups.splice(f.$index,0,e.groupToMove.groupName))),e.groupToMove=undefined,i.fixGroupIndexes()):e.colToMove&&(r.configGroups.indexOf(e.colToMove.col)===-1&&(u=t(n.target).closest(".ngGroupElement"),u.context.className==="ngGroupPanel"||u.context.className==="ngGroupPanelDescription ng-binding"?r.groupBy(e.colToMove.col):(f=angular.element(u).scope(),f&&r.removeGroup(f.$index))),e.colToMove=undefined);r.$$phase||r.$apply()};e.onHeaderMouseDown=function(n){var i=t(n.target).closest(".ngHeaderSortColumn"),r=angular.element(i).scope();r&&(e.colToMove={header:i,col:r.col})};e.onHeaderDrop=function(n){if(e.colToMove&&!e.colToMove.col.pinned){var o=t(n.target).closest(".ngHeaderSortColumn"),f=angular.element(o).scope();if(f){if(e.colToMove.col===f.col)return;r.columns.splice(e.colToMove.col.index,1);r.columns.splice(f.col.index,0,e.colToMove.col);i.fixColumnIndexes();e.colToMove=undefined;u.digest(r)}}};e.assignGridEventHandlers=function(){var f,e;i.config.tabIndex===-1?(i.$viewport.attr("tabIndex",u.numberOfGrids),u.numberOfGrids++):i.$viewport.attr("tabIndex",i.config.tabIndex);t(n).resize(function(){clearTimeout(f);f=setTimeout(function(){u.RebuildGrid(r,i)},100)});t(i.$root.parent()).on("resize",function(){clearTimeout(e);e=setTimeout(function(){u.RebuildGrid(r,i)},100)})};e.assignGridEventHandlers();e.assignEvents()},ut=function(n,t){n.maxRows=function(){return Math.max(n.totalServerItems,t.data.length)};n.multiSelect=t.config.enableRowSelection&&t.config.multiSelect;n.selectedItemCount=t.selectedItemCount;n.maxPages=function(){return Math.ceil(n.maxRows()/n.pagingOptions.pageSize)};n.pageForward=function(){var t=n.pagingOptions.currentPage;n.totalServerItems>0?n.pagingOptions.currentPage=Math.min(t+1,n.maxPages()):n.pagingOptions.currentPage++};n.pageBackward=function(){var t=n.pagingOptions.currentPage;n.pagingOptions.currentPage=Math.max(t-1,1)};n.pageToFirst=function(){n.pagingOptions.currentPage=1};n.pageToLast=function(){var t=n.maxPages();n.pagingOptions.currentPage=t};n.cantPageForward=function(){var i=n.pagingOptions.currentPage,r=n.maxPages();return n.totalServerItems>0?i>=r:t.data.length<1};n.cantPageToLast=function(){return n.totalServerItems>0?n.cantPageForward():!0};n.cantPageBackward=function(){var t=n.pagingOptions.currentPage;return t<=1}},ft=function(i,r,u,o,s,h,c,y,k,d,g){var tt={aggregateTemplate:undefined,afterSelectionChange:function(){},beforeSelectionChange:function(){return!0},checkboxCellTemplate:undefined,checkboxHeaderTemplate:undefined,columnDefs:undefined,data:[],dataUpdated:function(){},enableCellEdit:!1,enableCellEditOnFocus:!1,enableCellSelection:!1,enableColumnResize:!1,enableColumnReordering:!1,enableColumnHeavyVirt:!1,enablePaging:!1,enablePinning:!1,enableRowSelection:!0,enableSorting:!0,enableHighlighting:!1,excludeProperties:[],filterOptions:{filterText:"",useExternalFilter:!1},footerRowHeight:55,footerTemplate:undefined,groups:[],groupsCollapsedByDefault:!0,headerRowHeight:30,headerRowTemplate:undefined,jqueryUIDraggable:!1,jqueryUITheme:!1,keepLastSelected:!0,maintainColumnRatios:undefined,menuTemplate:undefined,multiSelect:!0,pagingOptions:{pageSizes:[250,500,1e3],pageSize:250,currentPage:1},pinSelectionCheckbox:!1,plugins:[],primaryKey:undefined,rowHeight:30,rowTemplate:undefined,selectedItems:[],selectWithCheckboxOnly:!1,showColumnMenu:!1,showFilter:!1,showFooter:!1,showGroupPanel:!1,showSelectionCheckbox:!1,sortInfo:{fields:[],columns:[],directions:[]},tabIndex:-1,totalServerItems:0,useExternalSorting:!1,i18n:"en",virtualizationThreshold:50},nt=this;nt.maxCanvasHt=0;nt.config=t.extend(tt,n.ngGrid.config,r);nt.config.showSelectionCheckbox=nt.config.showSelectionCheckbox&&nt.config.enableColumnHeavyVirt===!1;nt.config.enablePinning=nt.config.enablePinning&&nt.config.enableColumnHeavyVirt===!1;nt.config.selectWithCheckboxOnly=nt.config.selectWithCheckboxOnly&&nt.config.showSelectionCheckbox!==!1;nt.config.pinSelectionCheckbox=nt.config.enablePinning;typeof r.columnDefs=="string"&&(nt.config.columnDefs=i.$eval(r.columnDefs));nt.rowCache=[];nt.rowMap=[];nt.gridId="ng"+c.newId();nt.$root=null;nt.$groupPanel=null;nt.$topPanel=null;nt.$headerContainer=null;nt.$headerScroller=null;nt.$headers=null;nt.$viewport=null;nt.$canvas=null;nt.rootDim=nt.config.gridDim;nt.data=[];nt.lateBindColumns=!1;nt.filteredRows=[];nt.initTemplates=function(){var n=[];return angular.forEach(["rowTemplate","aggregateTemplate","headerRowTemplate","checkboxCellTemplate","checkboxHeaderTemplate","menuTemplate","footerTemplate"],function(t){n.push(nt.getTemplate(t))}),g.all(n)};nt.getTemplate=function(n){var t=nt.config[n],r=nt.gridId+n+".html",i=g.defer(),u;return t&&!l.test(t)?d.get(t,{cache:h}).success(function(n){h.put(r,n);i.resolve()}).error(function(){i.reject("Could not load template: "+t)}):t?(h.put(r,t),i.resolve()):(u=n+".html",h.put(r,h.get(u)),i.resolve()),i.promise};typeof nt.config.data=="object"&&(nt.data=nt.config.data);nt.calcMaxCanvasHeight=function(){return nt.config.groups.length>0?nt.rowFactory.parsedData.filter(function(n){return!n[e]}).length*nt.config.rowHeight:nt.filteredRows.length*nt.config.rowHeight};nt.elementDims={scrollW:0,scrollH:0,rowIndexCellW:25,rowSelectedCellW:25,rootMaxW:0,rootMaxH:0};nt.setRenderedRows=function(n){i.renderedRows.length=n.length;for(var t=0;t<n.length;t++)!i.renderedRows[t]||n[t].isAggRow||i.renderedRows[t].isAggRow?(i.renderedRows[t]=n[t].copy(),i.renderedRows[t].collapsed=n[t].collapsed,n[t].isAggRow||i.renderedRows[t].setVars(n[t])):i.renderedRows[t].setVars(n[t]),i.renderedRows[t].rowIndex=n[t].rowIndex,i.renderedRows[t].offsetTop=n[t].offsetTop,i.renderedRows[t].selected=n[t].selected,n[t].renderedRowIndex=t;nt.refreshDomSizes();i.$emit("ngGridEventRows",n)};nt.minRowsToRender=function(){var n=i.viewportDimHeight()||1;return Math.floor(n/nt.config.rowHeight)};nt.refreshDomSizes=function(){var n=new p;n.outerWidth=nt.elementDims.rootMaxW;n.outerHeight=nt.elementDims.rootMaxH;nt.rootDim=n;nt.maxCanvasHt=nt.calcMaxCanvasHeight()};nt.buildColumnDefsFromData=function(){nt.config.columnDefs=[];var n=nt.data[0];if(!n){nt.lateBoundColumns=!0;return}c.forIn(n,function(n,t){nt.config.excludeProperties.indexOf(t)===-1&&nt.config.columnDefs.push({field:t})})};nt.buildColumns=function(){var n=nt.config.columnDefs,t=[],r,u;n||(nt.buildColumnDefsFromData(),n=nt.config.columnDefs);nt.config.showSelectionCheckbox&&t.push(new a({colDef:{field:"✔",width:nt.elementDims.rowSelectedCellW,sortable:!1,resizable:!1,groupable:!1,headerCellTemplate:h.get(i.gridId+"checkboxHeaderTemplate.html"),cellTemplate:h.get(i.gridId+"checkboxCellTemplate.html"),pinned:nt.config.pinSelectionCheckbox},index:0,headerRowHeight:nt.config.headerRowHeight,sortCallback:nt.sortData,resizeOnDataCallback:nt.resizeOnData,enableResize:nt.config.enableColumnResize,enableSort:nt.config.enableSorting,enablePinning:nt.config.enablePinning},i,nt,o,h,c));n.length>0&&(r=nt.config.showSelectionCheckbox?1:0,u=i.configGroups.length,i.configGroups.length=0,angular.forEach(n,function(n,f){f+=r;var e=new a({colDef:n,index:f+u,originalIndex:f,headerRowHeight:nt.config.headerRowHeight,sortCallback:nt.sortData,resizeOnDataCallback:nt.resizeOnData,enableResize:nt.config.enableColumnResize,enableSort:nt.config.enableSorting,enablePinning:nt.config.enablePinning,enableCellEdit:nt.config.enableCellEdit||nt.config.enableCellEditOnFocus},i,nt,o,h,c),s=nt.config.groups.indexOf(n.field);s!==-1&&(e.isGroupedBy=!0,i.configGroups.splice(s,0,e),e.groupIndex=i.configGroups.length);t.push(e)}),i.columns=t,nt.config.groups.length>0&&nt.rowFactory.getGrouping(nt.config.groups))};nt.configureColumnWidths=function(){var u=[],f=[],h=0,n=0,t={},r,e,l,s,a;angular.forEach(i.columns,function(i,r){if(!c.isNullOrUndefined(i.originalIndex)){var u=i.originalIndex;nt.config.showSelectionCheckbox&&(i.originalIndex===0&&i.visible&&(n+=25),u--);t[u]=r}});angular.forEach(nt.config.columnDefs,function(r,e){var o=i.columns[t[e]],l,s,a;if(r.index=e,l=!1,c.isNullOrUndefined(r.width)?r.width="*":(l=isNaN(r.width)?c.endsWith(r.width,"%"):!1,s=l?r.width:parseInt(r.width,10)),isNaN(s)&&!i.hasUserChangedGridColumnWidths){if(s=r.width,s==="auto"){o.width=o.minWidth;n+=o.width;a=o;i.$on("ngGridEventData",function(){nt.resizeOnData(a)});return}if(s.indexOf("*")!==-1){o.visible!==!1&&(h+=s.length);u.push(r);return}if(l){f.push(r);return}throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid';}else o.visible!==!1&&(n+=o.width=parseInt(o.width,10))});f.length>0&&(nt.config.maintainColumnRatios=nt.config.maintainColumnRatios!==!1,r=0,e=0,angular.forEach(f,function(n){var f=i.columns[t[n.index]],o=n.width,u=parseInt(o.slice(0,-1),10)/100;r+=u;f.visible||(e+=u)}),l=r-e,angular.forEach(f,function(u){var o=i.columns[t[u.index]],h=u.width,f=parseInt(h.slice(0,-1),10)/100,s;f=e>0?f/l:f/r;s=nt.rootDim.outerWidth*r;o.width=Math.floor(s*f);n+=o.width}));u.length>0&&(nt.config.maintainColumnRatios=nt.config.maintainColumnRatios!==!1,s=nt.rootDim.outerWidth-n,nt.maxCanvasHt>i.viewportDimHeight()&&(s-=o.ScrollW),a=Math.floor(s/h),angular.forEach(u,function(r,f){var e=i.columns[t[r.index]],h,s;e.width=a*r.width.length;e.visible!==!1&&(n+=e.width);h=f===u.length-1;h&&n<nt.rootDim.outerWidth&&(s=nt.rootDim.outerWidth-n,nt.maxCanvasHt>i.viewportDimHeight()&&(s-=o.ScrollW),e.width+=s)}))};nt.init=function(){return nt.initTemplates().then(function(){i.selectionProvider=new st(nt,i,k);i.domAccessProvider=new v(nt);nt.rowFactory=new et(nt,i,o,h,c);nt.searchProvider=new ot(i,nt,s);nt.styleProvider=new ht(i,nt);i.$watch("configGroups",function(n){var t=[];angular.forEach(n,function(n){t.push(n.field||n)});nt.config.groups=t;nt.rowFactory.filteredRowsChanged();i.$emit("ngGridEventGroups",n)},!0);i.$watch("columns",function(n){i.isColumnResizing||o.RebuildGrid(i,nt);i.$emit("ngGridEventColumns",n)},!0);i.$watch(function(){return r.i18n},function(n){c.seti18n(i,n)});nt.maxCanvasHt=nt.calcMaxCanvasHeight();nt.config.sortInfo.fields&&nt.config.sortInfo.fields.length>0&&i.$watch(function(){return nt.config.sortInfo},function(){u.isSorting||(nt.sortColumnsInit(),i.$emit("ngGridEventSorted",nt.config.sortInfo))},!0)})};nt.resizeOnData=function(n){var r=n.minWidth,u=c.getElementsByClassName("col"+n.index);angular.forEach(u,function(n,i){var u,f,e;i===0?(f=t(n).find(".ngHeaderText"),u=c.visualLength(f)+10):(e=t(n).find(".ngCellText"),u=c.visualLength(e)+10);u>r&&(r=u)});n.width=n.longest=Math.min(n.maxWidth,r+7);o.BuildStyles(i,nt,!0)};nt.lastSortedColumns=[];nt.sortData=function(n,r){var u,e,f;r&&r.shiftKey&&nt.config.sortInfo?(u=nt.config.sortInfo.columns.indexOf(n),u===-1?(nt.config.sortInfo.columns.length===1&&(nt.config.sortInfo.columns[0].sortPriority=1),nt.config.sortInfo.columns.push(n),n.sortPriority=nt.config.sortInfo.columns.length,nt.config.sortInfo.fields.push(n.field),nt.config.sortInfo.directions.push(n.sortDirection),nt.lastSortedColumns.push(n)):nt.config.sortInfo.directions[u]=n.sortDirection):(e=t.isArray(n),nt.config.sortInfo.columns.length=0,nt.config.sortInfo.fields.length=0,nt.config.sortInfo.directions.length=0,f=function(n){nt.config.sortInfo.columns.push(n);nt.config.sortInfo.fields.push(n.field);nt.config.sortInfo.directions.push(n.sortDirection);nt.lastSortedColumns.push(n)},e?(nt.clearSortingData(),angular.forEach(n,function(n,t){n.sortPriority=t+1;f(n)})):(nt.clearSortingData(n),n.sortPriority=undefined,f(n)));nt.sortActual();nt.searchProvider.evalFilter();i.$emit("ngGridEventSorted",nt.config.sortInfo)};nt.sortColumnsInit=function(){nt.config.sortInfo.columns?nt.config.sortInfo.columns.length=0:nt.config.sortInfo.columns=[];angular.forEach(i.columns,function(n){var t=nt.config.sortInfo.fields.indexOf(n.field);t!==-1&&(n.sortDirection=nt.config.sortInfo.directions[t]||"asc",nt.config.sortInfo.columns[t]=n)});angular.forEach(nt.config.sortInfo.columns,function(n){nt.sortData(n)})};nt.sortActual=function(){if(!nt.config.useExternalSorting){var n=nt.data.slice(0);angular.forEach(n,function(n,t){var r=nt.rowMap[t],i;r!==undefined&&(i=nt.rowCache[r],i!==undefined&&(n.preSortSelected=i.selected,n.preSortIndex=t))});u.Sort(nt.config.sortInfo,n);angular.forEach(n,function(n,t){nt.rowCache[t].entity=n;nt.rowCache[t].selected=n.preSortSelected;nt.rowMap[n.preSortIndex]=t;delete n.preSortSelected;delete n.preSortIndex})}};nt.clearSortingData=function(n){n?(angular.forEach(nt.lastSortedColumns,function(t){n.index!==t.index&&(t.sortDirection="",t.sortPriority=null)}),nt.lastSortedColumns[0]=n,nt.lastSortedColumns.length=1):(angular.forEach(nt.lastSortedColumns,function(n){n.sortDirection="";n.sortPriority=null}),nt.lastSortedColumns=[])};nt.fixColumnIndexes=function(){for(var n=0;n<i.columns.length;n++)i.columns[n].index=n};nt.fixGroupIndexes=function(){angular.forEach(i.configGroups,function(n,t){n.groupIndex=t+1})};i.elementsNeedMeasuring=!0;i.columns=[];i.renderedRows=[];i.renderedColumns=[];i.headerRow=null;i.rowHeight=nt.config.rowHeight;i.jqueryUITheme=nt.config.jqueryUITheme;i.showSelectionCheckbox=nt.config.showSelectionCheckbox;i.enableCellSelection=nt.config.enableCellSelection;i.enableCellEditOnFocus=nt.config.enableCellEditOnFocus;i.footer=null;i.selectedItems=nt.config.selectedItems;i.multiSelect=nt.config.multiSelect;i.showFooter=nt.config.showFooter;i.footerRowHeight=i.showFooter?nt.config.footerRowHeight:0;i.showColumnMenu=nt.config.showColumnMenu;i.showMenu=!1;i.configGroups=[];i.gridId=nt.gridId;i.enablePaging=nt.config.enablePaging;i.pagingOptions=nt.config.pagingOptions;i.i18n={};c.seti18n(i,nt.config.i18n);i.adjustScrollLeft=function(n){for(var t,l,a,f=0,e=0,v=i.columns.length,s=[],h=!nt.config.enableColumnHeavyVirt,r=0,c=function(n){h?s.push(n):i.renderedColumns[r]?i.renderedColumns[r].setVars(n):i.renderedColumns[r]=n.copy();r++},u=0;u<v;u++)t=i.columns[u],t.visible!==!1&&(l=t.width+f,t.pinned?(c(t),a=u>0?n+e:n,o.setColLeft(t,a,nt),e+=t.width):l>=n&&f<=n+nt.rootDim.outerWidth&&c(t),f+=t.width);h&&(i.renderedColumns=s)};nt.prevScrollTop=0;nt.prevScrollIndex=0;i.adjustScrollTop=function(n,t){var r,u,e;if(nt.prevScrollTop!==n||t){if(n>0&&nt.$viewport[0].scrollHeight-n<=nt.$viewport.outerHeight()&&i.$emit("ngGridEventScroll"),r=Math.floor(n/nt.config.rowHeight),nt.filteredRows.length>nt.config.virtualizationThreshold){if(nt.prevScrollTop<n&&r<nt.prevScrollIndex+b)return;if(nt.prevScrollTop>n&&r>nt.prevScrollIndex-b)return;u=new w(Math.max(0,r-f),r+nt.minRowsToRender()+f)}else e=i.configGroups.length>0?nt.rowFactory.parsedData.length:nt.data.length,u=new w(0,Math.max(e,nt.minRowsToRender()+f));nt.prevScrollTop=n;nt.rowFactory.UpdateViewableRange(u);nt.prevScrollIndex=r}};i.toggleShowMenu=function(){i.showMenu=!i.showMenu};i.toggleSelectAll=function(n,t){i.selectionProvider.toggleSelectAll(n,!1,t)};i.totalFilteredItemsLength=function(){return nt.filteredRows.length};i.showGroupPanel=function(){return nt.config.showGroupPanel};i.topPanelHeight=function(){return nt.config.showGroupPanel===!0?nt.config.headerRowHeight+32:nt.config.headerRowHeight};i.viewportDimHeight=function(){return Math.max(0,nt.rootDim.outerHeight-i.topPanelHeight()-i.footerRowHeight-2)};i.groupBy=function(n){if(!(nt.data.length<1)&&n.groupable&&n.field){n.sortDirection||n.sort({shiftKey:i.configGroups.length>0?!0:!1});var t=i.configGroups.indexOf(n);t===-1?(n.isGroupedBy=!0,i.configGroups.push(n),n.groupIndex=i.configGroups.length):i.removeGroup(t);nt.$viewport.scrollTop(0);o.digest(i)}};i.removeGroup=function(n){var t=i.columns.filter(function(t){return t.groupIndex===n+1})[0];t.isGroupedBy=!1;t.groupIndex=0;i.columns[n].isAggCol&&(i.columns.splice(n,1),i.configGroups.splice(n,1),nt.fixGroupIndexes());i.configGroups.length===0&&(nt.fixColumnIndexes(),o.digest(i));i.adjustScrollLeft(0)};i.togglePin=function(n){for(var u=n.index,t=0,r=0;r<i.columns.length;r++){if(!i.columns[r].pinned)break;t++}n.pinned&&(t=Math.max(n.originalIndex,t-1));n.pinned=!n.pinned;i.columns.splice(u,1);i.columns.splice(t,0,n);nt.fixColumnIndexes();o.BuildStyles(i,nt,!0);nt.$viewport.scrollLeft(nt.$viewport.scrollLeft()-n.width)};i.totalRowWidth=function(){for(var r=0,t=i.columns,n=0;n<t.length;n++)t[n].visible!==!1&&(r+=t[n].width);return r};i.headerScrollerDim=function(){var t=i.viewportDimHeight(),r=nt.maxCanvasHt,u=r>t,n=new p;return n.autoFitHeight=!0,n.outerWidth=i.totalRowWidth(),u?n.outerWidth+=nt.elementDims.scrollW:r-t<=nt.elementDims.scrollH&&(n.outerWidth+=nt.elementDims.scrollW),n}},w=function(n,t){this.topRow=n;this.bottomRow=t},r=function(n,t,i,r,u){this.entity=n;this.config=t;this.selectionProvider=i;this.rowIndex=r;this.utils=u;this.selected=i.getSelection(n);this.cursor=this.config.enableRowSelection?"pointer":"default";this.beforeSelectionChange=t.beforeSelectionChangeCallback;this.afterSelectionChange=t.afterSelectionChangeCallback;this.offsetTop=this.rowIndex*t.rowHeight;this.rowDisplayIndex=0};r.prototype.setSelection=function(n){this.selectionProvider.setSelection(this,n);this.selectionProvider.lastClickedRow=this};r.prototype.continueSelection=function(n){this.selectionProvider.ChangeSelection(this,n)};r.prototype.ensureEntity=function(n){this.entity!==n&&(this.entity=n,this.selected=this.selectionProvider.getSelection(this.entity))};r.prototype.toggleSelected=function(n){if(!this.config.enableRowSelection&&!this.config.enableCellSelection)return!0;var t=n.target||n;return t.type==="checkbox"&&t.parentElement.className!=="ngSelectionCell ng-scope"?!0:this.config.selectWithCheckboxOnly&&t.type!=="checkbox"?(this.selectionProvider.lastClickedRow=this,!0):(this.beforeSelectionChange(this,n)&&this.continueSelection(n),!1)};r.prototype.alternatingRowClass=function(){var n=this.rowIndex%2==0;return{ngRow:!0,selected:this.selected,even:n,odd:!n,"ui-state-default":this.config.jqueryUITheme&&n,"ui-state-active":this.config.jqueryUITheme&&!n}};r.prototype.getProperty=function(n){return this.utils.evalProperty(this.entity,n)};r.prototype.copy=function(){return this.clone=new r(this.entity,this.config,this.selectionProvider,this.rowIndex,this.utils),this.clone.isClone=!0,this.clone.elm=this.elm,this.clone.orig=this,this.clone};r.prototype.setVars=function(n){n.clone=this;this.entity=n.entity;this.selected=n.selected;this.orig=n};var et=function(n,t,i,o,l){var v=this;v.aggCache={};v.parentCache=[];v.dataChanged=!0;v.parsedData=[];v.rowConfig={};v.selectionProvider=t.selectionProvider;v.rowHeight=30;v.numberOfAggregates=0;v.groupedData=undefined;v.rowHeight=n.config.rowHeight;v.rowConfig={enableRowSelection:n.config.enableRowSelection,rowClasses:n.config.rowClasses,selectedItems:t.selectedItems,selectWithCheckboxOnly:n.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:n.config.beforeSelectionChange,afterSelectionChangeCallback:n.config.afterSelectionChange,jqueryUITheme:n.config.jqueryUITheme,enableCellSelection:n.config.enableCellSelection,rowHeight:n.config.rowHeight};v.renderedRange=new w(0,n.minRowsToRender()+f);v.buildEntityRow=function(n,t){return new r(n,v.rowConfig,v.selectionProvider,t,l)};v.buildAggregateRow=function(t,i){var r=v.aggCache[t.aggIndex];return r||(r=new u(t,v,v.rowConfig.rowHeight,n.config.groupsCollapsedByDefault),v.aggCache[t.aggIndex]=r),r.rowIndex=i,r.offsetTop=i*v.rowConfig.rowHeight,r};v.UpdateViewableRange=function(n){v.renderedRange=n;v.renderedChange()};v.filteredRowsChanged=function(){n.lateBoundColumns&&n.filteredRows.length>0&&(n.config.columnDefs=undefined,n.buildColumns(),n.lateBoundColumns=!1,t.$evalAsync(function(){t.adjustScrollLeft(0)}));v.dataChanged=!0;n.config.groups.length>0&&v.getGrouping(n.config.groups);v.UpdateViewableRange(v.renderedRange)};v.renderedChange=function(){var u,i,r,t;if(!v.groupedData||n.config.groups.length<1){v.renderedChangeNoGroups();n.refreshDomSizes();return}for(v.wasGrouped=!0,v.parentCache=[],u=0,i=v.parsedData.filter(function(n){return n.isAggRow?n.parent&&n.parent.collapsed?!1:!0:(n[e]||(n.rowIndex=u++),!n[e])}),v.totalRows=i.length,r=[],t=v.renderedRange.topRow;t<v.renderedRange.bottomRow;t++)i[t]&&(i[t].offsetTop=t*n.config.rowHeight,r.push(i[t]));n.setRenderedRows(r)};v.renderedChangeNoGroups=function(){for(var i=[],t=v.renderedRange.topRow;t<v.renderedRange.bottomRow;t++)n.filteredRows[t]&&(n.filteredRows[t].rowIndex=t,n.filteredRows[t].offsetTop=t*n.config.rowHeight,i.push(n.filteredRows[t]));n.setRenderedRows(i)};v.fixRowCache=function(){var i=n.data.length,r=i-n.rowCache.length,t;if(r<0)n.rowCache.length=n.rowMap.length=i;else for(t=n.rowCache.length;t<i;t++)n.rowCache[t]=n.rowFactory.buildEntityRow(n.data[t],t)};v.parseGroupData=function(n){var r,i,t;if(n.values)for(r=0;r<n.values.length;r++)v.parentCache[v.parentCache.length-1].children.push(n.values[r]),v.parsedData.push(n.values[r]);else for(i in n)if(i===s||i===h||i===c)continue;else n.hasOwnProperty(i)&&(t=v.buildAggregateRow({gField:n[s],gLabel:i,gDepth:n[h],isAggRow:!0,_ng_hidden_:!1,children:[],aggChildren:[],aggIndex:v.numberOfAggregates,aggLabelFilter:n[c].aggLabelFilter},0),v.numberOfAggregates++,t.parent=v.parentCache[t.depth-1],t.parent&&(t.parent.collapsed=!1,t.parent.aggChildren.push(t)),v.parsedData.push(t),v.parentCache[t.depth]=t,v.parseGroupData(n[i]))};v.getGrouping=function(r){function tt(n,t){return n.filter(function(n){return n.field===t})}var f,d,u,p,w;v.aggCache=[];v.numberOfAggregates=0;v.groupedData={};var b=n.filteredRows,nt=r.length,k=t.columns;for(f=0;f<b.length;f++){if(d=b[f].entity,!d)return;for(b[f][e]=n.config.groupsCollapsedByDefault,u=v.groupedData,p=0;p<r.length;p++){var g=r[p],it=tt(k,g)[0],y=l.evalProperty(d,g);y=y?y.toString():"null";u[y]||(u[y]={});u[s]||(u[s]=g);u[h]||(u[h]=p);u[c]||(u[c]=it);u=u[y]}u.values||(u.values=[]);u.values.push(b[f])}if(k.length>0)for(w=0;w<r.length;w++)!k[w].isAggCol&&w<=nt&&k.splice(0,0,new a({colDef:{field:"",width:25,sortable:!1,resizable:!1,headerCellTemplate:'<div class="ngAggHeader"><\/div>',pinned:n.config.pinSelectionCheckbox},enablePinning:n.config.enablePinning,isAggCol:!0,headerRowHeight:n.config.headerRowHeight},t,n,i,o,l));n.fixColumnIndexes();t.adjustScrollLeft(0);v.parsedData.length=0;v.parseGroupData(v.groupedData);v.fixRowCache()};n.config.groups.length>0&&n.filteredRows.length>0&&v.getGrouping(n.config.groups)},ot=function(n,i,r){var u=this,f=[];u.extFilter=i.config.filterOptions.useExternalFilter;n.showFilter=i.config.showFilter;n.filterText="";u.fieldMap={};var e=function(n,t,i){var c,o,f,u,s,h,l;for(o in t)if(t.hasOwnProperty(o)){if(f=i[o.toLowerCase()],!f)continue;if(u=t[o],typeof u=="object")return e(n,u,f);if(s=null,h=null,f&&f.cellFilter&&(h=f.cellFilter.split(":"),s=r(h[0])),u!==null&&u!==undefined&&(typeof s=="function"?(l=s(u,h[1]).toString(),c=n.regex.test(l)):c=n.regex.test(u.toString()),c))return!0}return!1},h=function(n,t){var e,f=u.fieldMap[n.columnDisplay],c;if(!f)return!1;var s=f.cellFilter.split(":"),h=f.cellFilter?r(s[0]):null,i=t[n.column]||t[f.field.split(".")[0]];return i===null||i===undefined?!1:(typeof h=="function"?(c=h(typeof i=="object"?o(i,f.field):i,s[1]).toString(),e=n.regex.test(c)):e=n.regex.test(typeof i=="object"?o(i,f.field).toString():i.toString()),e)?!0:!1},c=function(n){for(var i,o,t=0,r=f.length;t<r;t++)if(i=f[t],o=i.column?h(i,n):e(i,n,u.fieldMap),!o)return!1;return!0};u.evalFilter=function(){i.filteredRows=f.length===0?i.rowCache:i.rowCache.filter(function(n){return c(n.entity)});for(var n=0;n<i.filteredRows.length;n++)i.filteredRows[n].rowIndex=n;i.rowFactory.filteredRowsChanged()};var o=function(n,t){var r,i,u,f;if(typeof n!="object"||typeof t!="string")return n;if(r=t.split("."),i=n,r.length>1){for(u=1,f=r.length;u<f;u++)if(i=i[r[u]],!i)return n;return i}return n},s=function(n,t){try{return new RegExp(n,t)}catch(i){return new RegExp(n.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}},l=function(n){var c,e,r,i,u,o,h;if(f=[],c=t.trim(n))for(e=c.split(";"),r=0;r<e.length;r++)i=e[r].split(":"),i.length>1?(u=t.trim(i[0]),o=t.trim(i[1]),u&&o&&f.push({column:u,columnDisplay:u.replace(/\s+/g,"").toLowerCase(),regex:s(o,"i")})):(h=t.trim(i[0]),h&&f.push({column:"",regex:s(h,"i")}))};u.extFilter||n.$watch("columns",function(n){for(var t,i,r,f,e=0;e<n.length;e++){if(t=n[e],t.field)if(t.field.match(/\./g)){for(i=t.field.split("."),r=u.fieldMap,f=0;f<i.length-1;f++)r[i[f]]=r[i[f]]||{},r=r[i[f]];r[i[i.length-1]]=t}else u.fieldMap[t.field.toLowerCase()]=t;t.displayName&&(u.fieldMap[t.displayName.toLowerCase().replace(/\s+/g,"")]=t)}});n.$watch(function(){return i.config.filterOptions.filterText},function(t){n.filterText=t});n.$watch("filterText",function(t){u.extFilter||(n.$emit("ngGridEventFilter",t),l(t),u.evalFilter())})},st=function(n,t,i){var r=this;r.multi=n.config.multiSelect;r.selectedItems=n.config.selectedItems;r.selectedIndex=n.config.selectedIndex;r.lastClickedRow=undefined;r.ignoreSelectedItemChanges=!1;r.pKeyParser=i(n.config.primaryKey);r.ChangeSelection=function(i,u){var l=u.which||u.keyCode,y=l===40||l===38,a,e,f,o,h,s,v,c;if(u&&u.shiftKey&&!u.keyCode&&r.multi&&n.config.enableRowSelection){if(r.lastClickedRow){if(a=t.configGroups.length>0?n.rowFactory.parsedData.filter(function(n){return!n.isAggRow}):n.filteredRows,e=i.rowIndex,f=r.lastClickedRowIndex,e===f)return!1;for(e<f?(e=e^f,f=e^f,e=e^f,e--):f++,o=[];f<=e;f++)o.push(a[f]);if(o[o.length-1].beforeSelectionChange(o,u)){for(h=0;h<o.length;h++)s=o[h],v=s.selected,s.selected=!v,s.clone&&(s.clone.selected=s.selected),c=r.selectedItems.indexOf(s.entity),c===-1?r.selectedItems.push(s.entity):r.selectedItems.splice(c,1);o[o.length-1].afterSelectionChange(o,u)}return r.lastClickedRow=i,r.lastClickedRowIndex=i.rowIndex,!0}}else r.multi?u.keyCode&&(!y||n.config.selectWithCheckboxOnly)||r.setSelection(i,!i.selected):r.lastClickedRow===i?r.setSelection(r.lastClickedRow,n.config.keepLastSelected?!0:!i.selected):(r.lastClickedRow&&r.setSelection(r.lastClickedRow,!1),r.setSelection(i,!i.selected));return r.lastClickedRow=i,r.lastClickedRowIndex=i.rowIndex,!0};r.getSelection=function(t){var i=!1,u;return n.config.primaryKey?(u=r.pKeyParser(t),angular.forEach(r.selectedItems,function(n){u===r.pKeyParser(n)&&(i=!0)})):i=r.selectedItems.indexOf(t)!==-1,i};r.setSelection=function(t,i){if(n.config.enableRowSelection){if(i)r.selectedItems.indexOf(t.entity)===-1&&(!r.multi&&r.selectedItems.length>0&&r.toggleSelectAll(!1,!0),r.selectedItems.push(t.entity));else{var u=r.selectedItems.indexOf(t.entity);u!==-1&&r.selectedItems.splice(u,1)}t.selected=i;t.orig&&(t.orig.selected=i);t.clone&&(t.clone.selected=i);t.afterSelectionChange(t)}};r.toggleSelectAll=function(t,i,u){var f=u?n.filteredRows:n.rowCache,o,e;if(i||n.config.beforeSelectionChange(f,t)){for(o=r.selectedItems.length,o>0&&(r.selectedItems.length=0),e=0;e<f.length;e++)f[e].selected=t,f[e].clone&&(f[e].clone.selected=t),t&&r.selectedItems.push(f[e].entity);i||n.config.afterSelectionChange(f,t)}}},ht=function(n,t){n.headerCellStyle=function(n){return{height:n.headerRowHeight+"px"}};n.rowStyle=function(t){var i={top:t.offsetTop+"px",height:n.rowHeight+"px"};return t.isAggRow&&(i.left=t.offsetLeft),i};n.canvasStyle=function(){return{height:t.maxCanvasHt+"px"}};n.headerScrollerStyle=function(){return{height:t.config.headerRowHeight+"px"}};n.topPanelStyle=function(){return{width:t.rootDim.outerWidth+"px",height:n.topPanelHeight()+"px"}};n.headerStyle=function(){return{width:t.rootDim.outerWidth+"px",height:t.config.headerRowHeight+"px"}};n.groupPanelStyle=function(){return{width:t.rootDim.outerWidth+"px",height:"32px"}};n.viewportStyle=function(){return{width:t.rootDim.outerWidth+"px",height:n.viewportDimHeight()+"px"}};n.footerStyle=function(){return{width:t.rootDim.outerWidth+"px",height:n.footerRowHeight+"px"}}};i.directive("ngCellHasFocus",["$domUtilityService",function(n){var t=function(t){t.isFocused=!0;n.digest(t);t.$broadcast("ngGridEventStartCellEdit");t.$on("ngGridEventEndCellEdit",function(){t.isFocused=!1;n.digest(t)})};return function(n,i){var r=!1,u=!1;n.editCell=function(){n.enableCellEditOnFocus||setTimeout(function(){t(n,i)},0)};i.bind("mousedown",function(){return n.enableCellEditOnFocus?u=!0:i.focus(),!0});i.bind("click",function(r){n.enableCellEditOnFocus&&(r.preventDefault(),u=!1,t(n,i))});i.bind("focus",function(){return r=!0,n.enableCellEditOnFocus&&!u&&t(n,i),!0});i.bind("blur",function(){return r=!1,!0});i.bind("keydown",function(u){return n.enableCellEditOnFocus||(r&&u.keyCode!==37&&u.keyCode!==38&&u.keyCode!==39&&u.keyCode!==40&&u.keyCode!==9&&!u.shiftKey&&u.keyCode!==13&&t(n,i),r&&u.shiftKey&&u.keyCode>=65&&u.keyCode<=90&&t(n,i),u.keyCode===27&&i.focus()),!0})}}]);i.directive("ngCellText",function(){return function(n,t){t.bind("mouseover",function(n){n.preventDefault();t.css({cursor:"text"})});t.bind("mouseleave",function(n){n.preventDefault();t.css({cursor:"default"})})}});i.directive("ngCell",["$compile","$domUtilityService",function(n,t){return{scope:!1,compile:function(){return{pre:function(t,i){var r,f=t.col.cellTemplate.replace(d,"row.entity."+t.col.field),u;t.col.enableCellEdit?(r=t.col.cellEditTemplate,r=r.replace(tt,f),r=r.replace(it,t.col.editableCellTemplate.replace(d,"row.entity."+t.col.field))):r=f;u=n(r)(t);t.enableCellSelection&&u[0].className.indexOf("ngSelectionCell")===-1&&(u[0].setAttribute("tabindex",0),u.addClass("ngCellElement"));i.append(u)},post:function(n,i){n.enableCellSelection&&n.domAccessProvider.selectionHandlers(n,i);n.$on("ngGridEventDigestCell",function(){t.digest(n)})}}}}}]);i.directive("ngEditCellIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(n,t,i){return function(n,t,r){var f,u;n.$watch(r.ngEditCellIf,function(r){f&&(f.remove(),f=undefined);u&&(u.$destroy(),u=undefined);r&&(u=n.$new(),i(u,function(n){f=n;t.after(n)}))})}}}}]);i.directive("ngGridFooter",["$compile","$templateCache",function(n,t){return{scope:!1,compile:function(){return{pre:function(i,r){r.children().length===0&&r.append(n(t.get(i.gridId+"footerTemplate.html"))(i))}}}}}]);i.directive("ngGridMenu",["$compile","$templateCache",function(n,t){return{scope:!1,compile:function(){return{pre:function(i,r){r.children().length===0&&r.append(n(t.get(i.gridId+"menuTemplate.html"))(i))}}}}}]);i.directive("ngGrid",["$compile","$filter","$templateCache","$sortService","$domUtilityService","$utilityService","$timeout","$parse","$http","$q",function(n,i,r,u,f,e,o,s,h,c){return{scope:!0,compile:function(){return{pre:function(l,a,v){var b=t(a),w=l.$eval(v.ngGrid),y;return w.gridDim=new p({outerHeight:t(b).height(),outerWidth:t(b).width()}),y=new ft(l,w,u,f,i,r,e,o,s,h,c),y.init().then(function(){if(typeof w.columnDefs=="string"?l.$parent.$watch(w.columnDefs,function(n){if(!n){y.refreshDomSizes();y.buildColumns();return}y.lateBoundColumns=!1;l.columns=[];y.config.columnDefs=n;y.buildColumns();y.eventProvider.assignEvents();f.RebuildGrid(l,y)},!0):y.buildColumns(),typeof w.totalServerItems=="string"?l.$parent.$watch(w.totalServerItems,function(n){l.totalServerItems=angular.isDefined(n)?n:0}):l.totalServerItems=0,typeof w.data=="string"){var i=function(n){y.data=t.extend([],n);y.rowFactory.fixRowCache();angular.forEach(y.data,function(n,t){var i=y.rowMap[t]||t;y.rowCache[i]&&y.rowCache[i].ensureEntity(n);y.rowMap[i]=t});y.searchProvider.evalFilter();y.configureColumnWidths();y.refreshDomSizes();y.config.sortInfo.fields.length>0&&(y.sortColumnsInit(),l.$emit("ngGridEventSorted",y.config.sortInfo));l.$emit("ngGridEventData",y.gridId)};l.$parent.$watch(w.data,i);l.$parent.$watch(w.data+".length",function(){i(l.$eval(w.data))})}return y.footerController=new ut(l,y),a.addClass("ngGrid").addClass(y.gridId.toString()),w.enableHighlighting||a.addClass("unselectable"),w.jqueryUITheme&&a.addClass("ui-widget"),a.append(n(r.get("gridTemplate.html"))(l)),f.AssignGridContainers(l,a,y),y.eventProvider=new rt(y,l,f,o),w.selectRow=function(n,t){y.rowCache[n]&&(y.rowCache[n].clone&&y.rowCache[n].clone.setSelection(t?!0:!1),y.rowCache[n].setSelection(t?!0:!1))},w.selectItem=function(n,t){w.selectRow(y.rowMap[n],t)},w.selectAll=function(n){l.toggleSelectAll(n)},w.selectVisible=function(n){l.toggleSelectAll(n,!0)},w.groupBy=function(n){if(n)l.groupBy(l.columns.filter(function(t){return t.field===n})[0]);else{var i=t.extend(!0,[],l.configGroups);angular.forEach(i,l.groupBy)}},w.sortBy=function(n){var t=l.columns.filter(function(t){return t.field===n})[0];t&&t.sort()},w.gridId=y.gridId,w.ngGrid=y,w.$gridScope=l,w.$gridServices={SortService:u,DomUtilityService:f,UtilityService:e},l.$on("ngGridEventDigestGrid",function(){f.digest(l.$parent)}),l.$on("ngGridEventDigestGridParent",function(){f.digest(l.$parent)}),l.$evalAsync(function(){l.adjustScrollLeft(0)}),angular.forEach(w.plugins,function(n){typeof n=="function"&&(n=new n);n.init(l.$new(),y,w.$gridServices);w.plugins[e.getInstanceType(n)]=n}),typeof w.init=="function"&&w.init(y,l),null})}}}}}]);i.directive("ngHeaderCell",["$compile",function(n){return{scope:!1,compile:function(){return{pre:function(t,i){i.append(n(t.col.headerCellTemplate)(t))}}}}}]);i.directive("ngInput",[function(){return{require:"ngModel",link:function(n,t,i,r){var u,f=n.$watch("ngModel",function(){u=r.$modelValue;f()});t.bind("keydown",function(i){switch(i.keyCode){case 37:case 38:case 39:case 40:i.stopPropagation();break;case 27:n.$$phase||n.$apply(function(){r.$setViewValue(u);t.blur()});break;case 13:(n.enableCellEditOnFocus&&n.totalFilteredItemsLength()-1>n.row.rowIndex&&n.row.rowIndex>0||n.enableCellEdit)&&t.blur()}return!0});t.bind("click",function(n){n.stopPropagation()});t.bind("mousedown",function(n){n.stopPropagation()});n.$on("ngGridEventStartCellEdit",function(){t.focus();t.select()});angular.element(t).bind("blur",function(){n.$emit("ngGridEventEndCellEdit")})}}}]);i.directive("ngRow",["$compile","$domUtilityService","$templateCache",function(n,t,i){return{scope:!1,compile:function(){return{pre:function(r,u){if(r.row.elm=u,r.row.clone&&(r.row.clone.elm=u),r.row.isAggRow){var f=i.get(r.gridId+"aggregateTemplate.html");f=r.row.aggLabelFilter?f.replace(y,"| "+r.row.aggLabelFilter):f.replace(y,"");u.append(n(f)(r))}else u.append(n(i.get(r.gridId+"rowTemplate.html"))(r));r.$on("ngGridEventDigestRow",function(){t.digest(r)})}}}}}]);i.directive("ngViewport",[function(){return function(n,t){var i,r,u=0;t.bind("scroll",function(t){var f=t.target.scrollLeft,e=t.target.scrollTop;return n.$headerContainer&&n.$headerContainer.scrollLeft(f),n.adjustScrollLeft(f),n.adjustScrollTop(e),n.$root.$$phase||n.$digest(),r=f,u=e,i=!1,!0});t.bind("mousewheel DOMMouseScroll",function(){return i=!0,t.focus&&t.focus(),!0});n.enableCellSelection||n.domAccessProvider.selectionHandlers(n,t)}}]);n.ngGrid.i18n.da={ngAggregateLabel:"artikler",ngGroupPanelDescription:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil.",ngSearchPlaceHolder:"Søg...",ngMenuText:"Vælg kolonner:",ngShowingItemsLabel:"Viste rækker:",ngTotalItemsLabel:"Rækker totalt:",ngSelectedItemsLabel:"Valgte rækker:",ngPageSizeLabel:"Side størrelse:",ngPagerFirstTitle:"Første side",ngPagerNextTitle:"Næste side",ngPagerPrevTitle:"Forrige side",ngPagerLastTitle:"Sidste side"};n.ngGrid.i18n.de={ngAggregateLabel:"artikel",ngGroupPanelDescription:"Ziehen Sie eine Spaltenüberschrift hier und legen Sie es der Gruppe nach dieser Spalte.",ngSearchPlaceHolder:"Suche...",ngMenuText:"Spalten auswählen:",ngShowingItemsLabel:"Zeige Artikel:",ngTotalItemsLabel:"Meiste Artikel:",ngSelectedItemsLabel:"Ausgewählte Artikel:",ngPageSizeLabel:"Größe Seite:",ngPagerFirstTitle:"Erste Page",ngPagerNextTitle:"Nächste Page",ngPagerPrevTitle:"Vorherige Page",ngPagerLastTitle:"Letzte Page"};n.ngGrid.i18n.en={ngAggregateLabel:"items",ngGroupPanelDescription:"Drag a column header here and drop it to group by that column.",ngSearchPlaceHolder:"Search...",ngMenuText:"Choose Columns:",ngShowingItemsLabel:"Showing Items:",ngTotalItemsLabel:"Total Items:",ngSelectedItemsLabel:"Selected Items:",ngPageSizeLabel:"Page Size:",ngPagerFirstTitle:"First Page",ngPagerNextTitle:"Next Page",ngPagerPrevTitle:"Previous Page",ngPagerLastTitle:"Last Page"};n.ngGrid.i18n.es={ngAggregateLabel:"Artículos",ngGroupPanelDescription:"Arrastre un encabezado de columna aquí y soltarlo para agrupar por esa columna.",ngSearchPlaceHolder:"Buscar...",ngMenuText:"Elegir columnas:",ngShowingItemsLabel:"Artículos Mostrando:",ngTotalItemsLabel:"Artículos Totales:",ngSelectedItemsLabel:"Artículos Seleccionados:",ngPageSizeLabel:"Tamaño de Página:",ngPagerFirstTitle:"Primera Página",ngPagerNextTitle:"Página Siguiente",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"};n.ngGrid.i18n.fr={ngAggregateLabel:"articles",ngGroupPanelDescription:"Faites glisser un en-tête de colonne ici et déposez-le vers un groupe par cette colonne.",ngSearchPlaceHolder:"Recherche...",ngMenuText:"Choisir des colonnes:",ngShowingItemsLabel:"Articles Affichage des:",ngTotalItemsLabel:"Nombre total d'articles:",ngSelectedItemsLabel:"Éléments Articles:",ngPageSizeLabel:"Taille de page:",ngPagerFirstTitle:"Première page",ngPagerNextTitle:"Page Suivante",ngPagerPrevTitle:"Page précédente",ngPagerLastTitle:"Dernière page"};n.ngGrid.i18n["pt-br"]={ngAggregateLabel:"items",ngGroupPanelDescription:"Arraste e solte uma coluna aqui para agrupar por essa coluna",ngSearchPlaceHolder:"Procurar...",ngMenuText:"Selecione as colunas:",ngShowingItemsLabel:"Mostrando os Items:",ngTotalItemsLabel:"Total de Items:",ngSelectedItemsLabel:"Items Selecionados:",ngPageSizeLabel:"Tamanho da Página:",ngPagerFirstTitle:"Primeira Página",ngPagerNextTitle:"Próxima Página",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"};n.ngGrid.i18n["zh-cn"]={ngAggregateLabel:"条目",ngGroupPanelDescription:"拖曳表头到此处以进行分组",ngSearchPlaceHolder:"搜索...",ngMenuText:"数据分组与选择列：",ngShowingItemsLabel:"当前显示条目：",ngTotalItemsLabel:"条目总数：",ngSelectedItemsLabel:"选中条目：",ngPageSizeLabel:"每页显示数：",ngPagerFirstTitle:"回到首页",ngPagerNextTitle:"下一页",ngPagerPrevTitle:"上一页",ngPagerLastTitle:"前往尾页"};n.ngGrid.i18n["zh-tw"]={ngAggregateLabel:"筆",ngGroupPanelDescription:"拖拉表頭到此處以進行分組",ngSearchPlaceHolder:"搜尋...",ngMenuText:"選擇欄位：",ngShowingItemsLabel:"目前顯示筆數：",ngTotalItemsLabel:"總筆數：",ngSelectedItemsLabel:"選取筆數：",ngPageSizeLabel:"每頁顯示：",ngPagerFirstTitle:"第一頁",ngPagerNextTitle:"下一頁",ngPagerPrevTitle:"上一頁",ngPagerLastTitle:"最後頁"};angular.module("ngGrid").run(["$templateCache",function(n){n.put("aggregateTemplate.html",'<div ng-click="row.toggleExpand()" ng-style="rowStyle(row)" class="ngAggregate">    <span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} {{AggItemsLabel}})<\/span>    <div class="{{row.aggClass()}}"><\/div><\/div>');n.put("cellEditTemplate.html",'<div ng-cell-has-focus ng-dblclick="editCell()">\t<div ng-edit-cell-if="!isFocused">\t\t\tDISPLAY_CELL_TEMPLATE\t<\/div>\t<div ng-edit-cell-if="isFocused">\t\tEDITABLE_CELL_TEMPLATE\t<\/div><\/div>');n.put("cellTemplate.html",'<div class="ngCellText" ng-class="col.colIndex()"><span ng-cell-text>{{COL_FIELD CUSTOM_FILTERS}}<\/span><\/div>');n.put("checkboxCellTemplate.html",'<div class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /><\/div>');n.put("checkboxHeaderTemplate.html",'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="allSelected" ng-change="toggleSelectAll(allSelected, true)"/>');n.put("editableCellTemplate.html",'<input ng-class="\'colt\' + col.index" ng-input="COL_FIELD" ng-model="COL_FIELD" />');n.put("footerTemplate.html",'<div ng-show="showFooter" class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()">    <div class="ngTotalSelectContainer" >        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}<\/span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})<\/span>        <\/div>        <div class="ngFooterSelectedItems" ng-show="multiSelect">            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}<\/span>        <\/div>    <\/div>    <div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">        <div style="float:left; margin-right: 10px;" class="ngRowCountPicker">            <span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}<\/span>            <select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" >                <option ng-repeat="size in pagingOptions.pageSizes">{{size}}<\/option>            <\/select>        <\/div>        <div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;">            <button class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"><\/div><\/div><\/button>            <button class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"><\/div><\/button>            <input class="ngPagerCurrent" min="1" max="{{maxPages()}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>            <button class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"><\/div><\/button>            <button class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"><\/div><\/div><\/button>        <\/div>    <\/div><\/div>');n.put("gridTemplate.html",'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()">    <div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="groupPanelStyle()">        <div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">{{i18n.ngGroupPanelDescription}}<\/div>        <ul ng-show="configGroups.length > 0" class="ngGroupList">            <li class="ngGroupItem" ng-repeat="group in configGroups">                <span class="ngGroupElement">                    <span class="ngGroupName">{{group.displayName}}                        <span ng-click="removeGroup($index)" class="ngRemoveGroup">x<\/span>                    <\/span>                    <span ng-hide="$last" class="ngGroupArrow"><\/span>                <\/span>            <\/li>        <\/ul>    <\/div>    <div class="ngHeaderContainer" ng-style="headerStyle()">        <div class="ngHeaderScroller" ng-style="headerScrollerStyle()" ng-include="gridId + \'headerRowTemplate.html\'"><\/div>    <\/div>    <div ng-grid-menu><\/div><\/div><div class="ngViewport" unselectable="on" ng-viewport ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()">    <div class="ngCanvas" ng-style="canvasStyle()">        <div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" ng-class="row.alternatingRowClass()" ng-row><\/div>    <\/div><\/div><div ng-grid-footer><\/div>');n.put("headerCellTemplate.html",'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }">    <div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">{{col.displayName}}<\/div>    <div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"><\/div>    <div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"><\/div>    <div class="ngSortPriority">{{col.sortPriority}}<\/div>    <div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable"><\/div><\/div><div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"><\/div>');n.put("headerRowTemplate.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngHeaderCell">\t<div class="ngVerticalBar" ng-style="{height: col.headerRowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;<\/div>\t<div ng-header-cell><\/div><\/div>');n.put("menuTemplate.html",'<div ng-show="showColumnMenu || showFilter"  class="ngHeaderButton" ng-click="toggleShowMenu()">    <div class="ngHeaderButtonArrow"><\/div><\/div><div ng-show="showMenu" class="ngColMenu">    <div ng-show="showFilter">        <input placeholder="{{i18n.ngSearchPlaceHolder}}" type="text" ng-model="filterText"/>    <\/div>    <div ng-show="showColumnMenu">        <span class="ngMenuText">{{i18n.ngMenuText}}<\/span>        <ul class="ngColList">            <li class="ngColListItem" ng-repeat="col in columns | ngColumns">                <label><input ng-disabled="col.pinned" type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}<\/label>\t\t\t\t<a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable && col.visible" ng-click="groupBy(col)"><\/a>\t\t\t\t<span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}<\/span>                      <\/li>        <\/ul>    <\/div><\/div>');n.put("rowTemplate.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}">\t<div class="ngVerticalBar" ng-style="{height: rowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;<\/div>\t<div ng-cell><\/div><\/div>')}])}(window,jQuery);app.directive("spinner",function(){return{restrict:"E",templateUrl:"/Content/Directives/spinner.html"}});angular.module("highcharts-ng",[]).directive("highchart",function(){function t(n,t,i){var r=n[t];n[t]=function(){var n=Array.prototype.slice.call(arguments);if(i.apply(this,n),r)return r.apply(this,n)}}function i(n,t){for(var r in t)t[r]&&t[r].constructor&&t[r].constructor===Object?(n[r]=n[r]||{},i(n[r],t[r])):n[r]=t[r];return n}var u=0,f=function(n){n.forEach(function(n){angular.isDefined(n.id)||(n.id="series-"+u++)})},e=function(n,r,u){var f={},e={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:!1}};return f=u.options?i(e,u.options):e,f.chart.renderTo=r[0],u.xAxis&&(t(f.chart.events,"selection",function(t){var i=this;t.xAxis?n.$apply(function(){n.config.xAxis.currentMin=t.xAxis[0].min;n.config.xAxis.currentMax=t.xAxis[0].max}):n.$apply(function(){n.config.xAxis.currentMin=i.xAxis[0].dataMin;n.config.xAxis.currentMax=i.xAxis[0].dataMax})}),t(f.chart.events,"addSeries",function(){n.config.xAxis.currentMin=this.xAxis[0].min||n.config.xAxis.currentMin;n.config.xAxis.currentMax=this.xAxis[0].max||n.config.xAxis.currentMax})),u.xAxis&&(f.xAxis=angular.copy(u.xAxis)),u.title&&(f.title=u.title),u.subtitle&&(f.subtitle=u.subtitle),u.credits&&(f.credits=u.credits),f},o=function(n,t){var i=n.getExtremes();(t.currentMin!==i.dataMin||t.currentMax!==i.dataMax)&&n.setExtremes(t.currentMin,t.currentMax,!1)},s=function(n,t){(t.currentMin||t.currentMax)&&n.xAxis[0].setExtremes(t.currentMin,t.currentMax,!0)},r=function(n,t){var u=[],i,r;for(t&&(f(t),t.forEach(function(t){u.push(t.id);var i=n.get(t.id);i?i.update(angular.copy(t),!1):n.addSeries(angular.copy(t),!1)})),i=n.series.length-1;i>=0;i--)r=n.series[i],u.indexOf(r.options.id)<0&&r.remove(!1)},n=function(n,t,i){i||(i={});var f=e(n,t,i),u=i.useHighStocks?new Highcharts.StockChart(f):new Highcharts.Chart(f);return i.xAxis&&s(u,i.xAxis),r(u,i.series),i.loading&&u.showLoading(),u.redraw(),u};return{restrict:"EAC",replace:!0,template:"<div><\/div>",scope:{config:"="},link:function(t,i){var u=n(t,i,t.config);t.$watch("config.series",function(n,t){n!==t&&(r(u,n),u.redraw())},!0);t.$watch("config.title",function(n){u.setTitle(n,!0)},!0);t.$watch("config.subtitle",function(n){u.setTitle(!0,n)},!0);t.$watch("config.loading",function(n){n?u.showLoading():u.hideLoading()});t.$watch("config.credits.enabled",function(n){n?u.credits.show():u.credits&&u.credits.hide()});t.$watch("config.useHighStocks",function(){u.destroy();u=n(t,i,t.config)});t.$watch("config.xAxis",function(n,t){n!==t&&n&&(u.xAxis[0].update(n),o(u.xAxis[0],angular.copy(n)),u.redraw())},!0);t.$watch("config.options",function(t,r,f){t!==r&&(u.destroy(),u=n(f,i,f.config))},!0)}}});app.service("authenticationService",["$http","$q",function(n,t){this.Login=function(i,r){var u=t.defer();return n({method:"POST",url:"Account/JsonLogin",data:i,headers:{RequestVerificationToken:r}}).success(function(n){u.resolve(n)}),u.promise};this.Register=function(i,r){var u=t.defer();return n({method:"POST",url:"Account/JsonRegister",data:i,headers:{RequestVerificationToken:r}}).success(function(n){u.resolve(n)}),u.promise};this.LogOut=function(i){var r=t.defer();return n({method:"POST",url:"Account/LogOff",headers:{RequestVerificationToken:i}}).success(function(n){r.resolve(n)}),r.promise}}]);app.service("autocompleteService",["$http",function(n){return{getSymbols:function(t){return n.post("/Portfolio/AutoComplete",{symbol:t}).then(function(n){return n.data})}}}]);app.service("highStockService",["utilitiesService",function(n){function u(){var n=Math.floor(Math.random()*7+1);return["#D200D6","#D60C00","#5BD600","#000000","#00C5FF","#0052FF","#F09600"][n]}var i,t=[],r=[];this.addHistoricalDataSeries=function(n){var f,i,e,o;try{if(n==undefined)return;for(f=[],i=0;i<=n.length;i++)n[i]!==undefined&&n[i].Date!==null&&n[i].AdjClose!==null&&(e=JSON.parse(n[i].Date.toString().replace(/\D/g,"")),o=[e,n[i].AdjClose],f[i]=o);r.push(n[0].Symbol);t.push({name:n[0].Symbol,data:f,color:u()})}catch(s){console.log(s)}};this.createChart=function(){i=$("#container").highcharts("StockChart",{chart:{backgroundColor:"rgba(40,40,40,0.40)"},rangeSelector:{selected:4},xAxis:{type:"datetime"},yAxis:{labels:{formatter:function(){return(this.value>0?"+":"")+this.value+"%"}},plotLines:[{value:0,width:2}]},plotOptions:{series:{compare:"percent"}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}<\/span>: <b>{point.y}<\/b> ({point.change}%)<br/>',valueDecimals:2},series:t})};this.duplicatedSeries=function(i){return n.isItemInArrayByProperty(t,"name",i)};this.removeSeries=function(n){for(var i=0;i<=t.length;i++)t[i]!==undefined&&t[i].name===n&&t.splice(i,1)};this.isChartEmpty=function(){return t.length===0?!0:!1};this.clearSeries=function(){t=[]}}]);app.service("optionAnalysisService",["$http","$q",function(n,t){var i=[];this.getOptionData=function(){return i};this.getOptionDataBySymbol=function(n){for(var t=0;t<=i.length;t++)if(i[t][0].Symbol===n)return i[t];return null};this.getOptions=function(i){var r=t.defer();return n.post("/Portfolio/OptionData",{symbol:i}).success(function(n){r.resolve(n)}),r.promise}}]);app.service("stockAnalysisService",["$http",function(n){var i=[],t=[],r=[];this.getStockList=function(){return i};this.getCompanySymbolKey=function(){return r};this.persistCompanySymbolKey=function(n){r.push(n)};this.getHistoricalData=function(){return t};this.getHistoricalDataBySymbol=function(n){for(var i=0;i<=t.length;i++)if(t[i][0].Symbol===n)return t[i];return null};this.getStockData=function(r){return n.post("/Portfolio/MarketData",{symbol:r}).success(function(n){return t.push(n),i.push(n[n.length-1]),n.length})};this.removeStock=function(n){i.splice(n,1)}}]);app.service("utilitiesService",function(){function n(n,t){return _.flatten(_.pluck(t,n.toString()))}this.isItemInArray=function(n,t){for(var i=0;i<=n.length;i++)if(n[i]===t)return!0;return!1};this.isItemInArrayByProperty=function(t,i,r){for(var f=n(i,t),u=0;u<=f.length;u++)if(f[u]===r)return!0;return!1};this.findObjByKey=function(n,t,i){for(var r=0;r<n.length;r++)if(n[r][t]===i)return n[r];return[]};this.removeFromArray=function(n,t){for(var i=0;i<=n.length;i++)n[i]===t&&n.splice(i,1)};this.removeObjByKey=function(n,t,i){for(var r=0;r<n.length;r++)n[r][t]===i&&n.splice(r,1)}});
/*
//# sourceMappingURL=AlgoTraderMerged.min.js.map
*/